{"ast":null,"code":"import DialogFound from \"../components/DialogFound\";\nexport default {\n  name: \"fundlist\",\n\n  data() {\n    return {\n      tableData: [],\n      allTableData: [],\n      filterTableData: [],\n      dialog: {\n        show: false,\n        title: \"\",\n        option: \"edit\"\n      },\n      form: {\n        type: \"\",\n        describe: \"\",\n        income: \"\",\n        expend: \"\",\n        cash: \"\",\n        remark: \"\",\n        id: \"\"\n      },\n      //需要给分页组件传的信息\n      paginations: {\n        page_index: 1,\n        // 当前位于哪页\n        total: 0,\n        // 总数\n        page_size: 5,\n        // 1页显示多少条\n        page_sizes: [5, 10, 15, 20],\n        //每页显示多少条\n        layout: \"total, sizes, prev, pager, next, jumper\" // 翻页属性\n\n      },\n      search_data: {\n        startTime: \"\",\n        endTime: \"\"\n      }\n    };\n  },\n\n  components: {\n    DialogFound\n  },\n\n  created() {\n    this.getProfile();\n  },\n\n  methods: {\n    getProfile() {\n      // 获取表格数据\n      this.$axios(\"/api/profiles\").then(res => {\n        // this.tableData = res.data;\n        this.allTableData = res.data;\n        this.filterTableData = res.data; // 设置分页数据\n\n        this.setPaginations();\n      });\n    },\n\n    onEditMoney(row) {\n      // 编辑\n      this.dialog = {\n        show: true,\n        title: \"修改资金信息\",\n        option: \"edit\"\n      };\n      this.form = {\n        type: row.type,\n        describe: row.describe,\n        income: row.income,\n        expend: row.expend,\n        cash: row.cash,\n        remark: row.remark,\n        id: row._id\n      };\n    },\n\n    onDeleteMoney(row, index) {\n      // 删除\n      this.$axios.delete(`/api/profiles/delete/${row._id}`).then(res => {\n        this.$message(\"删除成功\");\n        this.getProfile();\n      });\n    },\n\n    onAddMoney() {\n      // 添加\n      this.dialog = {\n        show: true,\n        title: \"添加资金信息\",\n        option: \"add\"\n      };\n      this.form = {\n        type: \"\",\n        describe: \"\",\n        income: \"\",\n        expend: \"\",\n        cash: \"\",\n        remark: \"\",\n        id: \"\"\n      };\n    },\n\n    handleCurrentChange(page) {\n      // 当前页\n      let sortnum = this.paginations.page_size * (page - 1);\n      let table = this.allTableData.filter((item, index) => {\n        return index >= sortnum;\n      }); // 设置默认分页数据\n\n      this.tableData = table.filter((item, index) => {\n        return index < this.paginations.page_size;\n      });\n    },\n\n    handleSizeChange(page_size) {\n      // 切换size\n      this.paginations.page_index = 1;\n      this.paginations.page_size = page_size;\n      this.tableData = this.allTableData.filter((item, index) => {\n        return index < page_size;\n      });\n    },\n\n    setPaginations() {\n      // 总页数\n      this.paginations.total = this.allTableData.length;\n      this.paginations.page_index = 1;\n      this.paginations.page_size = 5; // 设置默认分页数据\n\n      this.tableData = this.allTableData.filter((item, index) => {\n        return index < this.paginations.page_size;\n      });\n    },\n\n    onScreeoutMoney() {\n      // 筛选\n      if (!this.search_data.startTime || !this.search_data.endTime) {\n        this.$message({\n          type: \"warning\",\n          message: \"请选择时间区间\"\n        });\n        this.getProfile();\n        return;\n      }\n\n      const stime = this.search_data.startTime.getTime();\n      const etime = this.search_data.endTime.getTime();\n      this.allTableData = this.filterTableData.filter(item => {\n        let date = new Date(item.date);\n        let time = date.getTime();\n        return time >= stime && time <= etime;\n      }); // 分页数据\n\n      this.setPaginations();\n    }\n\n  }\n};","map":{"version":3,"mappings":"AAwJA;AAEA;EACAA,gBADA;;EAEAC;IACA;MACAC,aADA;MAEAC,gBAFA;MAGAC,mBAHA;MAIAC;QACAC,WADA;QAEAC,SAFA;QAGAC;MAHA,CAJA;MASAC;QACAC,QADA;QAEAC,YAFA;QAGAC,UAHA;QAIAC,UAJA;QAKAC,QALA;QAMAC,UANA;QAOAC;MAPA,CATA;MAkBA;MACAC;QACAC,aADA;QACA;QACAC,QAFA;QAEA;QACAC,YAHA;QAGA;QACAC,2BAJA;QAIA;QACAC,iDALA,CAKA;;MALA,CAnBA;MA0BAC;QACAC,aADA;QAEAC;MAFA;IA1BA;EA+BA,CAlCA;;EAmCAC;IACAC;EADA,CAnCA;;EAsCAC;IACA;EACA,CAxCA;;EAyCAC;IACAC;MACA;MACA;QACA;QACA;QACA,gCAHA,CAIA;;QACA;MACA,CANA;IAOA,CAVA;;IAWAC;MACA;MACA;QACAzB,UADA;QAEAC,eAFA;QAGAC;MAHA;MAKA;QACAE,cADA;QAEAC,sBAFA;QAGAC,kBAHA;QAIAC,kBAJA;QAKAC,cALA;QAMAC,kBANA;QAOAC;MAPA;IASA,CA3BA;;IA4BAgB;MACA;MACA;QACA;QACA;MACA,CAHA;IAIA,CAlCA;;IAmCAC;MACA;MACA;QACA3B,UADA;QAEAC,eAFA;QAGAC;MAHA;MAKA;QACAE,QADA;QAEAC,YAFA;QAGAC,UAHA;QAIAC,UAJA;QAKAC,QALA;QAMAC,UANA;QAOAC;MAPA;IASA,CAnDA;;IAoDAkB;MACA;MACA;MACA;QACA;MACA,CAFA,EAHA,CAMA;;MACA;QACA;MACA,CAFA;IAGA,CA9DA;;IA+DAC;MACA;MACA;MACA;MACA;QACA;MACA,CAFA;IAGA,CAtEA;;IAuEAC;MACA;MACA;MACA;MACA,+BAJA,CAKA;;MACA;QACA;MACA,CAFA;IAGA,CAhFA;;IAiFAC;MACA;MACA;QACA;UACA3B,eADA;UAEA4B;QAFA;QAIA;QACA;MACA;;MACA;MACA;MACA;QACA;QACA;QACA;MACA,CAJA,EAZA,CAiBA;;MACA;IACA;;EApGA;AAzCA","names":["name","data","tableData","allTableData","filterTableData","dialog","show","title","option","form","type","describe","income","expend","cash","remark","id","paginations","page_index","total","page_size","page_sizes","layout","search_data","startTime","endTime","components","DialogFound","created","methods","getProfile","onEditMoney","onDeleteMoney","onAddMoney","handleCurrentChange","handleSizeChange","setPaginations","onScreeoutMoney","message"],"sourceRoot":"src/views","sources":["FoundList.vue"],"sourcesContent":["<template>\n  <div class=\"fillcontain\">\n    <div>\n      <el-form :inline=\"true\" ref=\"search_data\" :model=\"search_data\">\n        <el-form-item label=\"投标时间筛选:\">\n          <el-date-picker\n            v-model=\"search_data.startTime\"\n            type=\"datetime\"\n            placeholder=\"选择开始时间\"\n          >\n          </el-date-picker>\n          --\n          <el-date-picker\n            v-model=\"search_data.endTime\"\n            type=\"datetime\"\n            placeholder=\"选择结束时间\"\n          >\n          </el-date-picker>\n        </el-form-item>\n        <el-form-item>\n          <el-button\n            type=\"primary\"\n            size=\"small\"\n            icon=\"search\"\n            @click=\"onScreeoutMoney()\"\n            >筛选</el-button\n          >\n        </el-form-item>\n        <el-form-item class=\"btnRight\">\n          <el-button\n            type=\"primary\"\n            size=\"small\"\n            icon=\"view\"\n            @click=\"onAddMoney()\"\n            >添加</el-button\n          >\n        </el-form-item>\n      </el-form>\n    </div>\n    <div class=\"table_container\">\n      <el-table\n        v-if=\"tableData.length > 0\"\n        :data=\"tableData\"\n        max-height=\"450\"\n        border\n        :default-sort=\"{ prop: 'date', order: 'descending' }\"\n        style=\"width: 100%\"\n      >\n        <el-table-column type=\"index\" label=\"序号\" align=\"center\" width=\"70\">\n        </el-table-column>\n        <el-table-column\n          prop=\"date\"\n          label=\"创建时间\"\n          align=\"center\"\n          width=\"250\"\n          sortable\n        >\n          <template slot-scope=\"scope\">\n            <el-icon name=\"time\"></el-icon>\n            <span style=\"margin-left: 10px\">{{ scope.row.date }}</span>\n          </template>\n        </el-table-column>\n        <el-table-column\n          prop=\"type\"\n          label=\"收支类型\"\n          align=\"center\"\n          width=\"150\"\n        >\n        </el-table-column>\n        <el-table-column\n          prop=\"describe\"\n          label=\"收支描述\"\n          align=\"center\"\n          width=\"180\"\n        >\n        </el-table-column>\n        <el-table-column prop=\"income\" label=\"收入\" align=\"center\" width=\"170\">\n          <template slot-scope=\"scope\">\n            <span style=\"color: #00d053\">+ {{ scope.row.income }}</span>\n          </template>\n        </el-table-column>\n        <el-table-column prop=\"expend\" label=\"支出\" align=\"center\" width=\"170\">\n          <template slot-scope=\"scope\">\n            <span style=\"color: #f56767\">- {{ scope.row.expend }}</span>\n          </template>\n        </el-table-column>\n        <el-table-column\n          prop=\"cash\"\n          label=\"账户现金\"\n          align=\"center\"\n          width=\"170\"\n        >\n          <template slot-scope=\"scope\">\n            <span style=\"color: #4db3ff\">{{ scope.row.cash }}</span>\n          </template>\n        </el-table-column>\n        <el-table-column prop=\"remark\" label=\"备注\" align=\"center\" width=\"220\">\n        </el-table-column>\n        <el-table-column\n          prop=\"operation\"\n          align=\"center\"\n          label=\"操作\"\n          fixed=\"right\"\n          width=\"180\"\n        >\n          <template slot-scope=\"scope\">\n            <el-button\n              type=\"warning\"\n              icon=\"edit\"\n              size=\"small\"\n              @click=\"onEditMoney(scope.row)\"\n              >编辑</el-button\n            >\n            <el-button\n              type=\"danger\"\n              icon=\"delete\"\n              size=\"small\"\n              @click=\"onDeleteMoney(scope.row, scope.$index)\"\n              >删除</el-button\n            >\n          </template>\n        </el-table-column>\n      </el-table>\n      <!-- 分页 -->\n      <el-row>\n        <el-col :span=\"24\">\n          <div class=\"pagination\">\n            <el-pagination\n              v-if=\"paginations.total > 0\"\n              :page-sizes=\"paginations.page_sizes\"\n              :page-size=\"paginations.page_size\"\n              :layout=\"paginations.layout\"\n              :total=\"paginations.total\"\n              :current-page.sync=\"paginations.page_index\"\n              @current-change=\"handleCurrentChange\"\n              @size-change=\"handleSizeChange\"\n            >\n            </el-pagination>\n          </div>\n        </el-col>\n      </el-row>\n    </div>\n    <!-- 弹框页面 -->\n    <DialogFound\n      :dialog=\"dialog\"\n      :form=\"form\"\n      @update=\"getProfile\"\n    ></DialogFound>\n  </div>\n</template>\n\n<script>\nimport DialogFound from \"../components/DialogFound\";\n\nexport default {\n  name: \"fundlist\",\n  data() {\n    return {\n      tableData: [],\n      allTableData: [],\n      filterTableData: [],\n      dialog: {\n        show: false,\n        title: \"\",\n        option: \"edit\",\n      },\n      form: {\n        type: \"\",\n        describe: \"\",\n        income: \"\",\n        expend: \"\",\n        cash: \"\",\n        remark: \"\",\n        id: \"\",\n      },\n      //需要给分页组件传的信息\n      paginations: {\n        page_index: 1, // 当前位于哪页\n        total: 0, // 总数\n        page_size: 5, // 1页显示多少条\n        page_sizes: [5, 10, 15, 20], //每页显示多少条\n        layout: \"total, sizes, prev, pager, next, jumper\", // 翻页属性\n      },\n      search_data: {\n        startTime: \"\",\n        endTime: \"\",\n      },\n    };\n  },\n  components: {\n    DialogFound,\n  },\n  created() {\n    this.getProfile();\n  },\n  methods: {\n    getProfile() {\n      // 获取表格数据\n      this.$axios(\"/api/profiles\").then((res) => {\n        // this.tableData = res.data;\n        this.allTableData = res.data;\n        this.filterTableData = res.data;\n        // 设置分页数据\n        this.setPaginations();\n      });\n    },\n    onEditMoney(row) {\n      // 编辑\n      this.dialog = {\n        show: true,\n        title: \"修改资金信息\",\n        option: \"edit\",\n      };\n      this.form = {\n        type: row.type,\n        describe: row.describe,\n        income: row.income,\n        expend: row.expend,\n        cash: row.cash,\n        remark: row.remark,\n        id: row._id,\n      };\n    },\n    onDeleteMoney(row, index) {\n      // 删除\n      this.$axios.delete(`/api/profiles/delete/${row._id}`).then((res) => {\n        this.$message(\"删除成功\");\n        this.getProfile();\n      });\n    },\n    onAddMoney() {\n      // 添加\n      this.dialog = {\n        show: true,\n        title: \"添加资金信息\",\n        option: \"add\",\n      };\n      this.form = {\n        type: \"\",\n        describe: \"\",\n        income: \"\",\n        expend: \"\",\n        cash: \"\",\n        remark: \"\",\n        id: \"\",\n      };\n    },\n    handleCurrentChange(page) {\n      // 当前页\n      let sortnum = this.paginations.page_size * (page - 1);\n      let table = this.allTableData.filter((item, index) => {\n        return index >= sortnum;\n      });\n      // 设置默认分页数据\n      this.tableData = table.filter((item, index) => {\n        return index < this.paginations.page_size;\n      });\n    },\n    handleSizeChange(page_size) {\n      // 切换size\n      this.paginations.page_index = 1;\n      this.paginations.page_size = page_size;\n      this.tableData = this.allTableData.filter((item, index) => {\n        return index < page_size;\n      });\n    },\n    setPaginations() {\n      // 总页数\n      this.paginations.total = this.allTableData.length;\n      this.paginations.page_index = 1;\n      this.paginations.page_size = 5;\n      // 设置默认分页数据\n      this.tableData = this.allTableData.filter((item, index) => {\n        return index < this.paginations.page_size;\n      });\n    },\n    onScreeoutMoney() {\n      // 筛选\n      if (!this.search_data.startTime || !this.search_data.endTime) {\n        this.$message({\n          type: \"warning\",\n          message: \"请选择时间区间\",\n        });\n        this.getProfile();\n        return;\n      }\n      const stime = this.search_data.startTime.getTime();\n      const etime = this.search_data.endTime.getTime();\n      this.allTableData = this.filterTableData.filter((item) => {\n        let date = new Date(item.date);\n        let time = date.getTime();\n        return time >= stime && time <= etime;\n      });\n      // 分页数据\n      this.setPaginations();\n    },\n  },\n};\n</script>\n<style scoped>\n.fillcontain {\n  width: 100%;\n  height: 100%;\n  padding: 16px;\n  box-sizing: border-box;\n}\n.btnRight {\n  float: right;\n}\n.pagination {\n  text-align: right;\n  margin-top: 10px;\n}\n</style>\n"]},"metadata":{},"sourceType":"module"}